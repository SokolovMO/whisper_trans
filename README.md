# whisper-trans üéß

> –ø—Ä–æ—Å—Ç–∞—è cli-—É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –∞—É–¥–∏–æ –≤ —Ç–µ–∫—Å—Ç —Å –ø–æ–º–æ—â—å—é [openai whisper](https://github.com/openai/whisper).
> –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏, –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ [uv](https://github.com/astral-sh/uv).

---

## üì¶ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–µ—Å–ª–∏ —É —Ç–µ–±—è –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `uv`, —Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –±—ã—Å—Ç—Ä–æ:

```bash
curl -Ls https://astral.sh/uv/install.sh | sh
```

–ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
uv sync
```

—ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- —Å–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv`
- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ `pyproject.toml`
- —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª `uv.lock`

---

## üöÄ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–±–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫:

```bash
uv run transcribe.py –ø—É—Ç—å_–∫_–∞—É–¥–∏–æ—Ñ–∞–π–ª—É [–º–æ–¥–µ–ª—å]
```

### –ø—Ä–∏–º–µ—Ä—ã:

```bash
uv run transcribe.py ./audio/test.mp3
uv run transcribe.py ./audio/voice_note.m4a small
```

–µ—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤—ã–±—Ä–∞—Ç—å –µ—ë –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ:

- tiny
- base
- small
- medium
- large

---

## üß™ –∑–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ `uv run`

—á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã `uv run`, –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ `transcribe.py` —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```python
#!/usr/bin/env -S uv run --script
# /// script
# requires-python = ">=3.11"
# dependencies = ["openai-whisper>=20240930"]
# ///
```

—Å–¥–µ–ª–∞–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x transcribe.py
```

—Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å:

```bash
./transcribe.py /–ø—É—Ç—å/–∫/–∞—É–¥–∏–æ—Ñ–∞–π–ª—É
```

---

## üìÅ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –ø–æ–ª—É—á–∏—à—å –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –ø–∞–ø–∫–µ `results_transcribe/`:

- `–∏–º—è_—Ñ–∞–π–ª–∞_–¥–∞—Ç–∞_transcription.txt` ‚Äì —Ç–µ–∫—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è
- `–∏–º—è_—Ñ–∞–π–ª–∞_–¥–∞—Ç–∞_with_timestamps.txt` ‚Äì —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏

---

## üìã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `openai-whisper`
- `torch` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–≤–∏—Ç—Å—è —Å whisper)

–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ—à—å –∫–æ–º–∞–Ω–¥–æ–π:

```bash
uv pip list
```

–¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç:

```bash
uv add –Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–∞–∫–µ—Ç–∞
uv remove –Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–∞–∫–µ—Ç–∞
```

---

## ‚öôÔ∏è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- `.mp3`, `.m4a`, `.wav`, `.ogg`, `.flac`, `.mp4` –∏ –¥—Ä—É–≥–∏–µ
- whisper –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—ã –±–µ–∑ —Ä—É—á–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

---

## üöÄ —Å–æ–≤–µ—Ç—ã

- –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π gpu (cuda –Ω–∞ nvidia, mps –Ω–∞ mac m1/m2)
- –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–¥–∞—á –±–µ—Ä–∏ –º–æ–¥–µ–ª–∏ `tiny` –∏–ª–∏ `small`
- –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∫—Ä–∏–ø—Ç, —á—Ç–æ–±—ã —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É —Ü–µ–ª—ã–µ –ø–∞–ø–∫–∏

---

## üìÑ –ª–∏—Ü–µ–Ω–∑–∏—è

mit ‚Äî –¥–µ–ª–∞–π —á—Ç–æ —Ö–æ—á–µ—à—å üíô
